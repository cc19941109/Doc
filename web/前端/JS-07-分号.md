# JS 分号

## 概述

https://time.geekbang.org/column/article/87179

## 分号

### 自动插入分号的规则

自动插入分号规则其实独立于所有的语法产生式定义，它的规则说起来非常简单，只有三条。

- 要有换行符，且下一个符号是不符合语法的，那么就尝试插入分号。
- 有换行符，且语法中规定此处不能有换行符，那么就自动插入分号。
- 源代码结束处，不能形成完整的脚本或者模块结构，那么就自动插入分号。



### 示例

#### IIFE 

```
(function(a){
    console.log(a);
})()
(function(a){
    console.log(a);
})()
```

这段代码意图上显然是形成两个 IIFE。

我们来看第三行结束的位置，JavaScript 引擎会认为函数返回的可能是个函数，那么，在后面再跟括号形成函数调用就是合理的，因此这里不会自动插入分号。

这是一些鼓励不写分号的编码风格会要求大家写 IIFE 时必须在行首加分号的原因。

#### return

```
function f(){
    return/*
        This is a return value.
    */1;
}
f();
// undefined
```

